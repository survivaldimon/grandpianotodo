# –°–µ—Å—Å–∏—è 26.12.2024 ‚Äî UI —É–ª—É—á—à–µ–Ω–∏—è –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## –û–±–∑–æ—Ä
–°–µ—Å—Å–∏—è –ø–æ—Å–≤—è—â–µ–Ω–∞ —É–ª—É—á—à–µ–Ω–∏—é UX, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é –±–∞–≥–æ–≤ –≤ –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏ —É—á–µ–Ω–∏–∫–æ–≤, —Å–æ–∑–¥–∞–Ω–∏—é —ç–∫—Ä–∞–Ω–∞ –ø—Ä–æ—Ñ–∏–ª—è –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.

---

## 1. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–∞—Ä–∏—Ñ–∞

### –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –æ–ø–ª–∞—Ç–µ –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Ç–∞—Ä–∏—Ñ (—Ç–∏–ø –æ–ø–ª–∞—Ç—ã), –Ω–æ –µ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–∏–≥–¥–µ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–æ—Å—å.

### –†–µ—à–µ–Ω–∏–µ
–î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–∞—Ä–∏—Ñ–∞ –≤ –¥–≤—É—Ö –º–µ—Å—Ç–∞—Ö:

**–ò—Å—Ç–æ—Ä–∏—è –æ–ø–ª–∞—Ç (–∫–∞—Ä—Ç–æ—á–∫–∞ —É—á–µ–Ω–∏–∫–∞):**
- –ë–µ–π–¥–∂ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Ç–∞—Ä–∏—Ñ–∞ —Ä—è–¥–æ–º —Å —Å—É–º–º–æ–π –æ–ø–ª–∞—Ç—ã
- –¶–≤–µ—Ç: primary (—Å–∏–Ω–∏–π)

**–í–∏–¥–∂–µ—Ç –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞:**
- –ë–µ–π–¥–∂ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Ç–∞—Ä–∏—Ñ–∞ —Ä—è–¥–æ–º —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º
- –ß–µ—Ä–µ–∑ —Å–≤—è–∑—å: `Subscription ‚Üí Payment ‚Üí PaymentPlan`

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `lib/shared/models/subscription.dart` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `payment` –∏ –≥–µ—Ç—Ç–µ—Ä `paymentPlanName`
- `lib/features/subscriptions/repositories/subscription_repository.dart` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω join `payments(*, payment_plans(*))` –≤–æ –≤—Å–µ –º–µ—Ç–æ–¥—ã
- `lib/features/students/screens/student_detail_screen.dart` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã –±–µ–π–¥–∂–∏ –≤ `_PaymentItem` –∏ `_SubscriptionCard`

---

## 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏ —É—á–µ–Ω–∏–∫–æ–≤

### –ü—Ä–æ–±–ª–µ–º–∞
- –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É—á–µ–Ω–∏–∫–∏ –Ω–µ –ø–æ–ø–∞–¥–∞–ª–∏ –≤ –∞—Ä—Ö–∏–≤
- –í –∞—Ä—Ö–∏–≤–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –∞–∫—Ç–∏–≤–Ω—ã–µ —É—á–µ–Ω–∏–∫–∏
- –õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –±—ã–ª–∞ –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞

### –ü—Ä–∏—á–∏–Ω–∞
1. `watchByInstitution` –≤—ã–∑—ã–≤–∞–ª `getByInstitution` –±–µ–∑ `includeArchived: true`
2. –§–∏–ª—å—Ç—Ä `StudentFilter.archived` –≤–æ–∑–≤—Ä–∞—â–∞–ª –≤—Å–µ—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –≤–º–µ—Å—Ç–æ —Ç–æ–ª—å–∫–æ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö

### –†–µ—à–µ–Ω–∏–µ
```dart
// student_repository.dart
final students = await getByInstitution(institutionId, includeArchived: true);

// student_provider.dart
case StudentFilter.archived:
  yield students.where((s) => s.archivedAt != null).toList();
```

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `lib/features/students/repositories/student_repository.dart`
- `lib/features/students/providers/student_provider.dart`

---

## 3. –ü—É—Å—Ç—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è —Å–ø–∏—Å–∫–∞ —É—á–µ–Ω–∏–∫–æ–≤

### –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –ø—É—Å—Ç–æ–º –∞—Ä—Ö–∏–≤–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª–æ—Å—å "–ù–µ—Ç —É—á–µ–Ω–∏–∫–æ–≤" —Å –∫–Ω–æ–ø–∫–æ–π "–î–æ–±–∞–≤–∏—Ç—å" ‚Äî —ç—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è –∞—Ä—Ö–∏–≤–∞.

### –†–µ—à–µ–Ω–∏–µ
–†–∞–∑–Ω—ã–µ EmptyState –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞:

| –§–∏–ª—å—Ç—Ä | –ó–∞–≥–æ–ª–æ–≤–æ–∫ | –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫ |
|--------|-----------|--------------|
| –í—Å–µ | –ù–µ—Ç —É—á–µ–Ω–∏–∫–æ–≤ | –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤–æ–≥–æ —É—á–µ–Ω–∏–∫–∞ + –∫–Ω–æ–ø–∫–∞ |
| –ú–æ–∏ | –ù–µ—Ç –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö —É—á–µ–Ω–∏–∫–æ–≤ | –ö –≤–∞–º –ø–æ–∫–∞ –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω—ã —É—á–µ–Ω–∏–∫–∏ |
| –° –¥–æ–ª–≥–æ–º | –ù–µ—Ç —É—á–µ–Ω–∏–∫–æ–≤ —Å –¥–æ–ª–≥–æ–º | –£ –≤—Å–µ—Ö —É—á–µ–Ω–∏–∫–æ–≤ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å |
| –ê—Ä—Ö–∏–≤ | –ê—Ä—Ö–∏–≤ –ø—É—Å—Ç | –ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É—á–µ–Ω–∏–∫–∏ |

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `lib/features/students/screens/students_list_screen.dart` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_buildEmptyState`

---

## 4. –£–ª—É—á—à–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —É—á–µ–Ω–∏–∫–∞

### –ü—Ä–æ–±–ª–µ–º–∞
- –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —É—á–µ–Ω–∏–∫–∞ –º–æ–∂–Ω–æ –±—ã–ª–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ "–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å"
- –ù–µ –±—ã–ª–æ –≤–∏–¥–Ω–æ, —á—Ç–æ —É—á–µ–Ω–∏–∫ –≤ –∞—Ä—Ö–∏–≤–µ

### –†–µ—à–µ–Ω–∏–µ

**–ú–µ–Ω—é –¥–µ–π—Å—Ç–≤–∏–π:**
- –ê–∫—Ç–∏–≤–Ω—ã–π —É—á–µ–Ω–∏–∫ ‚Üí "–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å" (–æ—Ä–∞–Ω–∂–µ–≤—ã–π)
- –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–π ‚Üí "–†–∞–∑–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å" (–∑–µ–ª—ë–Ω—ã–π)

**–ë–∞–Ω–Ω–µ—Ä –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏:**
```
üì¶ –£—á–µ–Ω–∏–∫ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω
   26.12.2024
```
–û—Ä–∞–Ω–∂–µ–≤—ã–π –±–∞–Ω–Ω–µ—Ä –≤ –Ω–∞—á–∞–ª–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å –¥–∞—Ç–æ–π –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏.

**–ú–µ—Ç–æ–¥ restore –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ:**
```dart
Future<bool> restore(String id, String institutionId) async {
  await _repo.restore(id);
  _ref.invalidate(studentsProvider(institutionId));
  _ref.invalidate(studentProvider(id));
  return true;
}
```

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `lib/features/students/providers/student_provider.dart` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `restore`
- `lib/features/students/screens/student_detail_screen.dart` ‚Äî –º–µ–Ω—é, –±–∞–Ω–Ω–µ—Ä, –¥–∏–∞–ª–æ–≥ —Ä–∞–∑–∞—Ä—Ö–∏–≤–∞—Ü–∏–∏

---

## 5. –≠–∫—Ä–∞–Ω –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ü—Ä–æ–±–ª–µ–º–∞
–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±—ã–ª–∞ –æ–ø—Ü–∏—è "–ü—Ä–æ—Ñ–∏–ª—å", –Ω–æ —ç–∫—Ä–∞–Ω–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–æ.

### –†–µ—à–µ–Ω–∏–µ
–°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —ç–∫—Ä–∞–Ω –ø—Ä–æ—Ñ–∏–ª—è:

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ê–≤–∞—Ç–∞—Ä (–ø–µ—Ä–≤–∞—è –±—É–∫–≤–∞ –∏–º–µ–Ω–∏)
- –ò–º—è (—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–µ)
- Email (—Ç–æ–ª—å–∫–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
- –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
lib/features/profile/
‚îú‚îÄ‚îÄ providers/
‚îÇ   ‚îî‚îÄ‚îÄ profile_provider.dart
‚îî‚îÄ‚îÄ screens/
    ‚îî‚îÄ‚îÄ profile_screen.dart
```

**–†–æ—É—Ç:** `/institutions/:institutionId/profile`

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `lib/features/profile/providers/profile_provider.dart` ‚Äî –Ω–æ–≤—ã–π
- `lib/features/profile/screens/profile_screen.dart` ‚Äî –Ω–æ–≤—ã–π
- `lib/core/router/app_router.dart` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω —Ä–æ—É—Ç
- `lib/features/institution/screens/settings_screen.dart` ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—è

---

## 6. –£–ª—É—á—à–µ–Ω–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π

### –î–æ–ª–∂–Ω–∏–∫–∏
**–ë—ã–ª–æ:** –û—Ç–∫—Ä—ã–≤–∞–ª—Å—è –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —É—á–µ–Ω–∏–∫–æ–≤
**–°—Ç–∞–ª–æ:** –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ —Å —Ñ–∏–ª—å—Ç—Ä–æ–º "–° –¥–æ–ª–≥–æ–º"

```dart
onTap: () {
  ref.read(studentFilterProvider.notifier).state = StudentFilter.withDebt;
  context.go('/institutions/$institutionId/students');
},
```

### –ë–ª–∏–∂–∞–π—à–µ–µ –∑–∞–Ω—è—Ç–∏–µ
**–ë—ã–ª–æ:** –ù–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ
**–°—Ç–∞–ª–æ:** –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –æ–±—â–µ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤

```dart
onTap: () {
  context.go('/institutions/$institutionId/schedule');
},
```

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `lib/features/dashboard/screens/dashboard_screen.dart`

---

## 7. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ overflow –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ

### –ü—Ä–æ–±–ª–µ–º–∞
–ù–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö —Ç–µ–∫—Å—Ç –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤—ã—Ö–æ–¥–∏–ª –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã (RenderFlex overflow).

### –†–µ—à–µ–Ω–∏–µ
–û–±–µ—Ä–Ω—É–ª —Ç–µ–∫—Å—Ç –ª–µ–π–±–ª–∞ –≤ `Expanded` —Å `TextOverflow.ellipsis`:

```dart
Expanded(
  child: Text(
    item.label,
    overflow: TextOverflow.ellipsis,
  ),
),
```

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `lib/features/statistics/screens/statistics_screen.dart`

---

## –ò—Ç–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ |
|-----------|------------|
| –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã | 2 |
| –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã | 10 |
| –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –±–∞–≥–∏ | 4 |
| –ù–æ–≤—ã–µ —Ñ–∏—á–∏ | 3 |

### –°–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
1. `lib/shared/models/subscription.dart`
2. `lib/features/subscriptions/repositories/subscription_repository.dart`
3. `lib/features/students/screens/student_detail_screen.dart`
4. `lib/features/students/repositories/student_repository.dart`
5. `lib/features/students/providers/student_provider.dart`
6. `lib/features/students/screens/students_list_screen.dart`
7. `lib/features/profile/providers/profile_provider.dart` (–Ω–æ–≤—ã–π)
8. `lib/features/profile/screens/profile_screen.dart` (–Ω–æ–≤—ã–π)
9. `lib/core/router/app_router.dart`
10. `lib/features/institution/screens/settings_screen.dart`
11. `lib/features/dashboard/screens/dashboard_screen.dart`
12. `lib/features/statistics/screens/statistics_screen.dart`
